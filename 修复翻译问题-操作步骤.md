# 🚀 修复翻译问题 - 快速操作指南

## 📋 问题总结

根据日志显示，**所有历史关卡**的 `payload.cn` 存储的都是摘要，而不是翻译。

## ✅ 已修复的问题

1. ✅ **代码问题已修复**：新生成的关卡不会再出现这个问题
2. ✅ **日志已添加**：可以清楚看到问题所在

## 🔧 现在需要做的

### 方案一：批量自动修复（推荐）

我已经创建了自动修复脚本，运行：

```bash
# 1. 进入服务器目录
cd apps/server

# 2. 确保代码已构建
pnpm build

# 3. 运行修复脚本
node fix-translation-data.js
```

**脚本会：**
- 🔍 自动扫描所有有问题的关卡
- 🤖 使用 AI 为每个英文句子生成正确的中文翻译
- 💾 自动更新数据库
- 📊 显示修复进度

**预计时间：**
- 如果有 48 个关卡，每个关卡约 2-3 秒（包括翻译API调用和1秒延迟）
- 总共约 **2-3 分钟**

### 方案二：手动逐个修复

如果关卡不多，可以手动修复：

1. 打开管理后台
2. 进入课程包
3. 点击「编辑」按钮
4. 在「中文翻译」字段输入正确翻译
5. 保存

## 📊 从日志看到的情况

你的日志显示：
- ✅ 所有关卡都有英文内容（`payloadEn`）
- ❌ 所有关卡的 `payloadCn` 都等于 `summary`（摘要）
- ⚠️ 总共约 **48+ 个关卡**需要修复

## 🎯 建议

**推荐使用批量修复脚本**，因为：
- ✅ 自动完成，节省时间
- ✅ 使用 AI 生成准确翻译
- ✅ 有进度显示
- ✅ 有错误处理

## 📝 运行脚本后的验证

修复完成后：
1. 刷新管理后台页面
2. 检查几个关卡，确认翻译正确
3. 查看服务器日志，应该不再有 `⚠️ 警告：cn 等于 summary!`

---

**详细说明文档**: 查看 `FIX_TRANSLATION_GUIDE.md`
